{"version":3,"sources":["../../../../src/shared/lib/router/action-queue.ts"],"names":["isThenable","ACTION_REFRESH","ACTION_SERVER_ACTION","ACTION_NAVIGATE","reducer","React","startTransition","createEmptyCacheNode","ActionQueueContext","createContext","runRemainingActions","actionQueue","setState","pending","next","runAction","action","prevState","state","Error","last","payload","actionResult","handleResult","nextState","discarded","needsRefresh","dispatch","type","cache","mutable","origin","window","location","devToolsInstance","send","resolve","then","err","reject","dispatchAction","resolvers","deferredPromise","Promise","newAction","createMutableActionQueue","result"],"mappings":"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"}