{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/refresh-reducer.ts"],"names":["fetchServerResponse","createRecordFromThenable","createHrefFromUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","handleExternalUrl","handleMutable","CacheStates","fillLazyItemsTillLeafWithHead","refreshReducer","state","action","cache","mutable","origin","href","canonicalUrl","currentTree","tree","isForCurrentTree","JSON","stringify","previousTree","data","URL","nextUrl","buildId","then","flightData","canonicalUrlOverride","pushRef","pendingPush","flightDataPath","length","console","log","treePatch","newTree","Error","canonicalUrlOverrideHref","undefined","subTreeData","head","slice","status","READY","prefetchCache","Map","patchedTree"],"mappings":"AAAA,SAASA,mBAAmB,QAAQ,2BAA0B;AAC9D,SAASC,wBAAwB,QAAQ,iCAAgC;AACzE,SAASC,iBAAiB,QAAQ,0BAAyB;AAC3D,SAASC,2BAA2B,QAAQ,sCAAqC;AACjF,SAASC,2BAA2B,QAAQ,sCAAqC;AAMjF,SAASC,iBAAiB,QAAQ,qBAAoB;AACtD,SAASC,aAAa,QAAQ,oBAAmB;AACjD,SAASC,WAAW,QAAQ,2DAA0D;AACtF,SAASC,6BAA6B,QAAQ,yCAAwC;AAEtF,OAAO,SAASC,eACdC,KAA2B,EAC3BC,MAAqB;IAErB,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAEC,MAAM,EAAE,GAAGH;IACnC,MAAMI,OAAOL,MAAMM,YAAY;IAE/B,IAAIC,cAAcP,MAAMQ,IAAI;IAE5B,MAAMC,mBACJC,KAAKC,SAAS,CAACR,QAAQS,YAAY,MAAMF,KAAKC,SAAS,CAACJ;IAE1D,IAAIE,kBAAkB;QACpB,OAAOb,cAAcI,OAAOG;IAC9B;IAEA,IAAI,CAACD,MAAMW,IAAI,EAAE;QACf,uDAAuD;QACvD,wCAAwC;QACxCX,MAAMW,IAAI,GAAGtB,yBACXD,oBACE,IAAIwB,IAAIT,MAAMD,SACd;YAACG,WAAW,CAAC,EAAE;YAAEA,WAAW,CAAC,EAAE;YAAEA,WAAW,CAAC,EAAE;YAAE;SAAU,EAC3DP,MAAMe,OAAO,EACbf,MAAMgB,OAAO;IAGnB;IAEA,OAAOd,MAAMW,IAAI,CAACI,IAAI,CACpB;YAAC,CAACC,YAAYC,qBAAqB;QACjC,4DAA4D;QAC5D,IAAI,OAAOD,eAAe,UAAU;YAClC,OAAOvB,kBACLK,OACAG,SACAe,YACAlB,MAAMoB,OAAO,CAACC,WAAW;QAE7B;QAEA,2DAA2D;QAC3DnB,MAAMW,IAAI,GAAG;QAEb,KAAK,MAAMS,kBAAkBJ,WAAY;YACvC,oFAAoF;YACpF,IAAII,eAAeC,MAAM,KAAK,GAAG;gBAC/B,oCAAoC;gBACpCC,QAAQC,GAAG,CAAC;gBACZ,OAAOzB;YACT;YAEA,2GAA2G;YAC3G,MAAM,CAAC0B,UAAU,GAAGJ;YACpB,MAAMK,UAAUlC,4BACd,sBAAsB;YACtB;gBAAC;aAAG,EACJc,aACAmB;YAGF,IAAIC,YAAY,MAAM;gBACpB,MAAM,IAAIC,MAAM;YAClB;YAEA,IAAIlC,4BAA4Ba,aAAaoB,UAAU;gBACrD,OAAOhC,kBACLK,OACAG,SACAE,MACAL,MAAMoB,OAAO,CAACC,WAAW;YAE7B;YAEA,MAAMQ,2BAA2BV,uBAC7B3B,kBAAkB2B,wBAClBW;YAEJ,IAAIX,sBAAsB;gBACxBhB,QAAQG,YAAY,GAAGuB;YACzB;YAEA,0DAA0D;YAC1D,MAAM,CAACE,aAAaC,KAAK,GAAGV,eAAeW,KAAK,CAAC,CAAC;YAElD,8FAA8F;YAC9F,IAAIF,gBAAgB,MAAM;gBACxB7B,MAAMgC,MAAM,GAAGrC,YAAYsC,KAAK;gBAChCjC,MAAM6B,WAAW,GAAGA;gBACpBjC,8BACEI,OACA,4FAA4F;gBAC5F4B,WACAJ,WACAM;gBAEF7B,QAAQD,KAAK,GAAGA;gBAChBC,QAAQiC,aAAa,GAAG,IAAIC;YAC9B;YAEAlC,QAAQS,YAAY,GAAGL;YACvBJ,QAAQmC,WAAW,GAAGX;YACtBxB,QAAQG,YAAY,GAAGD;YAEvBE,cAAcoB;QAChB;QAEA,OAAO/B,cAAcI,OAAOG;IAC9B,GACA,IAAMH;AAEV"}